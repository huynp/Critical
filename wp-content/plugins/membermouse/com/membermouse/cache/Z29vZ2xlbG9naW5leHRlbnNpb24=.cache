/**
 * 
 * MemberMouse(TM) (http://www.membermouse.com)
 * (c) MemberMouse, LLC. All rights reserved.
 *
 */
class MM_GoogleLoginExtension extends MM_AbstractSocialLoginExtension
{	
	
	public function __construct($autoloadDependencies=true,$configData="") 
	{ 
		//google+ specific settings
		$this->token = MM_Extension::$GOOGLE_LOGIN_TOKEN;
		$this->listingImage  = "https://dl.dropboxusercontent.com/u/265387542/plugin_images/logos/extensions-google.jpg";
		$this->extensionName = "Login with Google";
		$this->providerName  = "Google";
		$this->keyName       = "Client ID";
		$this->secretName    = "Client Secret";
	 	$this->supportArticleUrl = "http://membermouse.uservoice.com/knowledgebase/articles/361021-configuring-google-login";
		parent::__construct($autoloadDependencies,$configData);
	}
	
	
	protected function getHybridAuthConfig()
	{
		$config = parent::getHybridAuthConfig();
		$config["providers"] = array (
				$this->token => array (
						"enabled" => true,
						"keys"    => array ( "id" => $this->apiKey, "secret" => $this->apiSecret ),
						"scope"           => "https://www.googleapis.com/auth/userinfo.email"   , // optional
				)
		);
		return $config;
	}
	
	
	public function displayConfigScreen()
	{
		$callbackUrl = $this->libraryUrl."/index.php?hauth.done=Google";
		$this->additionalInfo = "<tr>
				<td NOWRAP>Callback URL</td>
				<td NOWRAP>
					<span style='font-family:courier; font-size:11px;'>
					<input id='mm-google-callback-url' type='text' readonly value='{$callbackUrl}' style='width:600px' onclick=\"jQuery('#mm-google-callback-url').focus(); jQuery('#mm-google-callback-url').select();\" />
					</span>
				</td>
			</tr>\n";
		return parent::displayConfigScreen();	
	}
}
